# JSON 序列化与反序列化

> Question: 学习 JSON 看到了术语“反序列化”和“序列化”。他们的意思是什么？
>
> Answer:
> JSON 是一种将对象编码为字符串的格式。序列化意味着将一个对象转换为该字符串，反序列化是其反向操作（转换字符串-> object）。
> 传输数据或将其存储在文件中时，数据必须是字节字符串，但是很少有这种格式的复杂对象。序 列化可以将这些复杂的对象转换为字节字符串以供此类使用。
> 字节串发送后，接收方将不得不从字节串中恢复原始对象。这称为反序列化。
> 比如：{foo: [1, 4, 7, 10], bar: "baz"} 序列化为 JSON,会将其转换为字符串：'{"foo":[1, 4,7,10],"bar":"baz"}'，可以存储或通过电线发送到任何地方。
> 然后，接收者可以反序列化此字符串以返回原始对象:{foo: [1, 4, 7, 10], bar: "baz"}。

## 定义

序列化：把对象转化为可传输的字节序列过程称为序列化
反序列化：把字节序列还原为对象的过程称为反序列化

## 为什么要序列化？

如果光看定义我想你很难一下子理解序列化的意义，那么我们可以从另一个角度来推导出什么是序列化, 那么究竟序列化的目的是什么？

其实序列化最终的目的是为了对象可以跨平台存储，和进行网络传输。而我们进行跨平台存储和网络传输的方式就是 IO，而我们的 IO 支持的数据格式就是字节数组。

因为我们单方面的只把对象转成字节数组还不行，因为没有规则的字节数组我们是没办法把对象的本来面目还原回来的，所以我们必须在把对象转成字节数组的时候就制定一种规则（序列化），那么我们从 IO 流里面读出数据的时候再以这种规则把对象还原回来（反序列化）。

如果我们要把一栋房子从一个地方运输到另一个地方去，序列化就是我把房子拆成一个个的砖块放到车子里，然后留下一张房子原来结构的图纸，反序列化就是我们把房子运输到了目的地以后，根据图纸把一块块砖头还原成房子原来面目的过程。

## 什么情况下需要序列化？

通过上面我想你已经知道了凡是需要进行“跨平台存储”和”网络传输”的数据，都需要进行序列化。

本质上存储和网络传输 都需要经过 把一个对象状态保存成一种跨平台识别的字节格式，然后其他的平台才可以通过字节信息解析还原对象信息。

## 序列化的方式

序列化只是一种拆装组装对象的规则，那么这种规则肯定也可能有多种多样，比如现在常见的序列化方式有：

JDK（不支持跨语言）、JSON、XML、Hessian、Kryo（不支持跨语言）、Thrift、Protostuff、FST（不支持跨语言）

## 序列化技术选型的几个关键点

序列化协议各有千秋，不能简单的说一种序列化协议是最好的，只能从你的当时环境下去选择最适合你们的序列化协议，如果你要为你的公司项目进行序列化技术的选型，那么主要从以下几个因素：

1. 协议是否支持跨平台：如果你们公司有好多种语言进行混合开发，那么就肯定不适合用有语言局限性的序列化协议，要不然你 JDK 序列化出来的格式，其他语言并没法支持。

1. 序列化的速度：如果序列化的频率非常高，那么选择序列化速度快的协议会为你的系统性能提升不少。

1. 序列化出来的大小：如果频繁的在网络中传输的数据那就需要数据越小越好，小的数据传输快，也不占带宽，也能整体提升系统的性能。
