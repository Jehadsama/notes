# 简谈 go 的数值类型

数值类型是一门编程语言中经常使用到的类型之一。go 语言原生支持整型、浮点型、复数类型。

## 整型

整型可分为平台无关整型和平台相关整型，区别在于，不同 CPU 架构或操作系统下面整型的长度是否是一致。

### 平台无关整型

|  类型  | 有无符号 | 长度(字节) |                   取值范围                   |
| :----: | :------: | :--------: | :------------------------------------------: |
|  int8  |    有    |     1      |                  [-128,127]                  |
| int16  |    有    |     2      |                [-32768,32767]                |
| int32  |    有    |     4      |           [-2147483648,2147483647]           |
| int64  |    有    |     8      | [- 9223372036854775808, 9223372036854775807] |
| uint8  |    无    |     1      |                   [0,255]                    |
| uint16 |    无    |     2      |                  [0,65535]                   |
| uint32 |    无    |     4      |                [0,4294967295]                |
| uint64 |    无    |     8      |          [O, 18446744073709551615]           |

类型有无符号的区别本质是最高二进制位（bit 位）是否被解释为符号位，这影响到有无符号整型的取值范围

例：
| 类型 | 最高位是否为符号位 | 二进制 |十进制|
| :--: | :-------------: | :--------: | :----: |
| int8 | 是 | 10000001 | -128 |
| uint8 | 否 | 10000001 | 129 |

go 采用 2 的补码作为整型的比特位编码方法。go 的补码是通过将原码逐位取反，再加 1 的到。

例：

十进制 127 => 二进制 01111111 => 取反 10000000 => 加一 10000001

### 平台相关整型

|  类型   | 有无符号 |                 长度(字节)                  |
| :-----: | :------: | :-----------------------------------------: |
|   int   |    有    |               32 位（4 字节）               |
|  uint   |    无    |               32 位（4 字节）               |
| uintptr |    无    | go 规范描述：“大到足以存储任意一个指针的值” |

因此编写有移植性要求的程序时，不能强依赖这些平台相关整型的长度。可以通过 unsafe 包的 SizeOf 函数获取这三个类型宰目标运行平台上的长度。

### 整型溢出问题

无论哪种整型类型都有其取值范围，当运算结果超出这个整型的取值范围，就被称为发生==整型溢出==问题。
由于整型无法表示它溢出后的那个“结果”，所以出现溢出情况后，对应的整型变量的值依然会落到它的取值范围内，只是结果值与我们的预期不符，导致程序逻辑出错。

例：

```go
var s int8 = 127
s += 1 // 预期128，实际结果-128

var u uint8 = 1
u -= 2 // 预期-1，实际结果255
```

### 字面值与格式化

```go
a := 53        // 十进制
b := 0700      // 八进制，以"0"为前缀
c1 := 0xaabbcc // 十六进制，以"0x"为前缀
c2 := 0Xddeeff // 十六进制，以"0X"为前缀

d1 := 0b10000001 // 二进制，以"0b"为前缀
d2 := 0B10000001 // 二进制，以"0B"为前缀
e1 := 0o700      // 八进制，以"0o"为前缀
e2 := 0O700      // 八进制，以"0O"为前缀

// go 1.13版本后出现的数字分隔符
f := 5_3_7   // 十进制: 537
g := 0b_1000_0111  // 二进制位表示为10000111
h1 := 0_700  // 八进制: 0700
h2 := 0o_700 // 八进制: 0700
i := 0x_5c_6d // 十六进制：0x5c6d
```

## 浮点型
