# 关于缓存的穿透、击穿、雪崩

## 缓存穿透

概念：请求一个不存在的 key，redis 没有，数据库也没有，当大量请求时造成数据库崩溃

解决：

- 布隆过滤器
- 缓存空值

## 缓存击穿

概念：大量请求访问一个 key(比如热点数据)，当这个 key 失效时，瞬间请求打到数据库导致崩溃

解决：

- key 永不过期
- 利用分布式锁(实现同时只能一个进程访问数据库)

## 缓存雪崩

概念：大量的 key 过期(有效期自然过期或服务器宕机停电等),导致大量请求瞬间打到数据库造成崩溃

解决：

- 多 redis 服务(异地多活)
- 限流降级(缓存失效后，通过加锁或队列来控制数据库读写缓存的线程数量，比如某个 key 只允许一个线程查询数据和写缓存，其它线程等待)
- 数据预热(在正式部署之前，把可能的数据先预先访问，在即将发生大并发访问前手动触发加载缓存不同的 key，设置不同的过期时间，让缓存失效的时间尽量均匀)
